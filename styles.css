
    :root {
      --bg: #0f1216;
      --card: rgba(255,255,255,0.06);
      --stroke: rgba(255,255,255,0.12);
      --text: #f1f5f9;
      --muted: #9aa4af;
      --accent: #00e0ff;
      --accent-2: #7c4dff;
      --success: #22c55e;
      --danger: #ef4444;
      --shadow: 0 10px 30px rgba(0,0,0,0.35);
      --glass: blur(10px) saturate(115%);
    }
    [data-theme="light"] {
      --bg: #f5f7fb;
      --card: rgba(255,255,255,0.72);
      --stroke: rgba(15,18,22,0.08);
      --text: #0f1216;
      --muted: #475569;
      --accent: #0ea5e9;
      --accent-2: #6d28d9;
      --shadow: 0 10px 24px rgba(15,18,22,0.12);
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      background: radial-gradient(1200px 800px at 80% -10%, rgba(0,224,255,0.15), transparent 60%),
                  radial-gradient(1000px 700px at 20% 110%, rgba(124,77,255,0.18), transparent 60%),
                  var(--bg);
      color: var(--text);
      font-family: "Cairo", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      display: flex; flex-direction: column; align-items: center; gap: 14px;
      padding: 22px 14px 28px;
    }

    .hero {
      width: min(1100px, 96vw);
      display: flex; align-items: center; justify-content: space-between;
      gap: 12px;
    }
    .brand { display: flex; align-items: center; gap: 12px; }
    .logo {
      width: 42px; height: 42px; border-radius: 12px;
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      box-shadow: 0 8px 26px rgba(0,224,255,0.25), inset 0 0 18px rgba(255,255,255,0.25);
    }
    .title {
      font-weight: 800; font-size: clamp(20px, 4.2vw, 28px);
      letter-spacing: 0.4px;
      background: linear-gradient(135deg, var(--text), var(--accent));
      -webkit-background-clip: text; background-clip: text; color: transparent;
    }
    .actions { display: flex; align-items: center; gap: 8px; }

    .btn {
      border: 1px solid var(--stroke);
      background: var(--card);
      color: var(--text);
      padding: 8px 14px;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 600;
      box-shadow: var(--shadow);
      transition: 180ms ease;
      backdrop-filter: var(--glass);
    }
    .btn:hover { transform: translateY(-1px); border-color: rgba(255,255,255,0.25); }
    .btn:active { transform: translateY(0); }
    .btn.primary {
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      border: none; color: #fff;
      box-shadow: 0 12px 30px rgba(0,224,255,0.25);
    }
    .btn.ghost { background: transparent; }

    .btn.donate {
      border-color: color-mix(in srgb, var(--accent) 55%, var(--stroke));
      background: linear-gradient(
        135deg,
        color-mix(in srgb, var(--accent) 14%, transparent),
        color-mix(in srgb, var(--accent-2) 12%, transparent)
      );
    }
    .btn.donate:hover {
      border-color: color-mix(in srgb, var(--accent) 75%, var(--stroke));
    }
    .switch {
      display: inline-flex; align-items: center; gap: 8px;
      border: 1px solid var(--stroke); padding: 6px 10px; border-radius: 20px;
      background: var(--card); box-shadow: var(--shadow); backdrop-filter: var(--glass);
      cursor: pointer; user-select: none;
    }

    .layout {
      width: min(1100px, 96vw);
      display: grid;
      grid-template-columns: 1.5fr 1fr;
      gap: 16px;
    }
    @media (max-width: 980px) { .layout { grid-template-columns: 1fr; } }

    .card {
      border: 1px solid var(--stroke);
      background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
      border-radius: 16px;
      box-shadow: var(--shadow);
      overflow: hidden;
      backdrop-filter: var(--glass);
    }

    .game-wrap { position: relative; padding: 14px; }

    .game-wrap .scoreboard { margin-bottom: 12px; }

    .names {
      display: none;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-top: 10px;
      padding-top: 10px;
      border-top: 1px solid var(--stroke);
    }
    body.local2 .names { display: grid; }
    .name-field { display: grid; gap: 6px; font-weight: 600; color: var(--muted); font-size: 13px; }
    .name-field input {
      border: 1px solid var(--stroke);
      background: var(--card);
      color: var(--text);
      padding: 10px 12px;
      border-radius: 10px;
      font: inherit;
      box-shadow: var(--shadow);
      backdrop-filter: var(--glass);
      outline: none;
    }
    .name-field input:disabled { opacity: 0.6; cursor: not-allowed; }
    .canvas-frame {
      position: relative;
      border-radius: 14px;
      border: 1px solid var(--stroke);
      overflow: hidden;
      width: 88%;
      margin-inline: auto;
      aspect-ratio: 900 / 506;
      background:
        repeating-linear-gradient(180deg, rgba(255,255,255,0.03) 0 3px, transparent 3px 6px),
        linear-gradient(180deg, rgba(0,0,0,0.35), rgba(255,255,255,0.02));
      box-shadow: inset 0 0 80px rgba(0,0,0,0.35), 0 10px 26px rgba(0,0,0,0.25);
    }
    #game {
      width: 100%;
      height: 100%;
      display: block;
      touch-action: none;
    }

    .toolbar {
      display: flex; flex-wrap: wrap; gap: 8px; align-items: center; justify-content: center;
      padding: 12px; border-top: 1px solid var(--stroke);
      background: rgba(255,255,255,0.03);
    }

    .side { display: grid; gap: 12px; padding: 14px; }
    .scoreboard, .settings {
      border: 1px solid var(--stroke);
      background: var(--card);
      border-radius: 14px;
      padding: 14px; backdrop-filter: var(--glass);
      box-shadow: var(--shadow);
    }
    .score-line {
      display: grid; grid-template-columns: 1fr auto 1fr; align-items: center; gap: 10px;
      font-weight: 800; font-size: 28px;
    }
    .score-line .me { color: var(--success); text-align: center; }
    .score-line .ai { color: var(--danger); text-align: center; }
    .score-sub { display: flex; justify-content: space-between; color: var(--muted); font-weight: 600; margin-top: 6px; font-size: 14px; }
    .settings h3 { margin: 0 0 8px; font-size: 16px; }
    .field { display: grid; grid-template-columns: 1fr auto; align-items: center; gap: 10px; margin: 8px 0; }
    .range { width: 180px; }
    select.range {
      border: 1px solid var(--stroke);
      background: var(--card);
      color: var(--muted);
      padding: 8px 10px;
      border-radius: 10px;
      font: inherit;
      box-shadow: var(--shadow);
      backdrop-filter: var(--glass);
      outline: none;
    }
    select.range:hover { border-color: rgba(255,255,255,0.25); }
    select.range:disabled { opacity: 0.6; cursor: not-allowed; }
    .chip {
      display: inline-flex; align-items: center; gap: 6px;
      padding: 6px 10px; border: 1px solid var(--stroke); border-radius: 999px;
      background: rgba(255,255,255,0.04);
    }
    input[type="range"], input[type="color"], input[type="checkbox"] { cursor: pointer; accent-color: var(--accent); }

    .overlay {
      position: absolute; inset: 0; display: none;
      background: linear-gradient(180deg, rgba(0,0,0,0.45), rgba(0,0,0,0.35));
      align-items: center; justify-content: center; text-align: center;
      padding: 20px;
    }
    .overlay.show { display: flex; }
    .overlay .panel {
      border: 1px solid var(--stroke);
      background: var(--card); backdrop-filter: var(--glass);
      border-radius: 16px; padding: 20px; max-width: 520px; width: 92%;
      box-shadow: var(--shadow);
    }
    .overlay h2 { margin: 0 0 10px; }
    .overlay p { color: var(--muted); margin: 6px 0 14px; }

    .hintbar {
      position: absolute; left: 10px; top: 10px;
      padding: 6px 10px; font-size: 12px; color: var(--muted);
      border: 1px solid var(--stroke); border-radius: 10px; background: rgba(0,0,0,0.25);
      backdrop-filter: var(--glass);
    }

    .settings-backdrop {
      display: none;
    }

    @media (max-width: 980px) {
      body { padding: 14px 10px 18px; }
      .hero { width: min(1100px, 100vw); }
      .layout { width: min(1100px, 100vw); gap: 12px; }
      .game-wrap { padding: 10px; }

      /* On mobile, avoid covering the top paddle */
      .hintbar { display: none; }

      /* Make the playfield take more vertical space on phones */
      .canvas-frame {
        width: 85%;
        margin-inline: auto;
        aspect-ratio: auto;
        height: 56dvh;
      }

      .names { grid-template-columns: 1fr; }

      /* Settings are tucked behind a button on mobile */
      .side { display: none; }
      body.show-settings .side {
        display: grid;
        position: fixed;
        inset: 74px 10px 10px 10px;
        z-index: 40;
        overflow: auto;
        overscroll-behavior: contain;
      }
      .settings-backdrop {
        display: block;
        position: fixed;
        inset: 0;
        z-index: 35;
        background: rgba(0,0,0,0.45);
      }
      body:not(.show-settings) .settings-backdrop {
        display: none;
      }
    }